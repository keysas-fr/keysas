import{_ as p,o as i,c as a,w as v,v as f,a as s,t as h,b as c,d as g,F as m,r as $,e as x,f as K,N as k,g as _,h as u}from"./index-cbd18d6f.js";import{b as r}from"./index-e311e5e3.js";const N={name:"AddForm",props:{},computed:{},data(){return{name:"",ip:"",nameError:"",ipError:"",show:!1}},methods:{async onSubmit(){console.log("Form submitted"),this.nameError=this.name.length>4?"":"Name must be at least 5 chars long";let o=/^(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)){3}$/gm;this.ipError=o.test(this.ip)?"":"Invalid IP format",!this.nameError&&!this.ipError?(console.log("setData called"),await r("save_station",{name:this.name,ip:this.ip}),console.log("Device added:",this.name,this.ip),this.ShowTwoSec()):console.log("setData Not called")},ShowTwoSec(){this.show=!0,setTimeout(()=>{this.show=!1},2e3)}}},D=s("p",null," Name of the new Keysas station:",-1),E={key:0,class:"error"},S=s("br",null,null,-1),A=s("br",null,null,-1),V=s("p",null," IP of the new Keysas station:",-1),F={key:1,class:"error"},B=s("br",null,null,-1),I=s("br",null,null,-1),T={class:"submit"},C=s("button",{class:"send btn btn-outline-success btn-lg shadow"},[s("i",{class:"bi bi-check-square"}," Add")],-1),L=s("br",null,null,-1),P=s("br",null,null,-1),q={key:0,class:"validate animate__animated animate__zoomIn text-success"};function H(o,t,b,y,e,l){return i(),a("form",{class:"add-form",onSubmit:t[2]||(t[2]=g((...n)=>l.onSubmit&&l.onSubmit(...n),["prevent"]))},[D,v(s("input",{required:"","onUpdate:modelValue":t[0]||(t[0]=n=>e.name=n)},null,512),[[f,e.name]]),e.nameError?(i(),a("div",E,h(e.nameError),1)):c("",!0),S,A,V,v(s("input",{required:"","onUpdate:modelValue":t[1]||(t[1]=n=>e.ip=n)},null,512),[[f,e.ip]]),e.ipError?(i(),a("div",F,h(e.ipError),1)):c("",!0),B,I,s("div",T,[C,L,P,e.show?(i(),a("h3",q,"Done !")):c("",!0)])],32)}const M=p(N,[["render",H]]);const U={name:"DisplayKeysas",computed:{},data(){return{stations:"",hide:!0}},async mounted(){r("list_stations").then(o=>this.stations=o).catch(o=>console.error(o))},methods:{async displayKeysasList(){r("list_stations").then(o=>this.stations=o).catch(o=>console.error(o))}},async getKeysasIP(o){r("get_station_ip",{name:o}).then(t=>t).catch(t=>console.log(t))}},j=K('<div class="tip"><h5 class="text-info"><i class="bi bi-moon-stars-fill"> Help</i></h5><br><span class="tip-text">Add here the Keysas stations you want to manage with this application.</span><br><span class="tip-text">You can find the IP address in the Help menu of your Keysas station <i class="bi bi-emoji-wink"></i></span></div><br>',2),z={key:0,class:"custom-li tip"},Y={class:"text-center"},G=s("span",{class:"bi bi-caret-up-fill"}," Hide registred Keysas stations",-1),J=[G],O=s("br",null,null,-1),Q=s("br",null,null,-1),R={class:"List"},W={class:"list-group-item"},X=s("br",null,null,-1),Z={key:1},ss=s("span",{class:"bi bi-caret-down-fill"}," Show registred Keysas stations",-1),ts=[ss];function es(o,t,b,y,e,l){return i(),a(m,null,[j,e.hide?(i(),a("div",Z,[s("button",{class:"send btn btn-light shadow",onClick:t[1]||(t[1]=n=>e.hide=!1)},ts)])):(i(),a("div",z,[s("div",Y,[s("button",{class:"send btn btn-light shadow",onClick:t[0]||(t[0]=n=>{e.hide=!0,l.displayKeysasList()})},J),O,Q]),s("div",R,[s("ul",W,[(i(!0),a(m,null,$(e.stations,(n,d)=>(i(),a("li",{class:"list-group-item list-group-item-light",key:d},[x(h(n)+" ",1),X]))),128))])])]))],64)}const os=p(U,[["render",es]]),ns={name:"AddView",components:{NavBar:k,AddForm:M,DisplayKeysas:os},computed:{},data(){return{name:"",ip:""}},methods:{}},is={class:"container"},as=s("div",{class:"row"},[s("h1",null,"Add a new Keysas station !")],-1),ls={class:"row"},rs={class:"col-sm"},ds={class:"col-sm"};function cs(o,t,b,y,e,l){const n=_("NavBar"),d=_("AddForm"),w=_("DisplayKeysas");return i(),a(m,null,[u(n),s("div",is,[as,s("div",ls,[s("div",rs,[u(d)]),s("div",ds,[u(w)])])])],64)}const hs=p(ns,[["render",cs]]);export{hs as default};
